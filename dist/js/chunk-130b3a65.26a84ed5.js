(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-130b3a65"],{"356b":function(e,t,n){"use strict";n("dadb")},"4d35":function(e,t,n){"use strict";n("9596")},9596:function(e,t,n){},b0c0:function(e,t,n){var a=n("83ab"),c=n("5e77").EXISTS,i=n("e330"),o=n("9bf2").f,s=Function.prototype,l=i(s.toString),r=/^\s*function ([^ (]*)/,u=i(r.exec),d="name";a&&!c&&o(s,d,{configurable:!0,get:function(){try{return u(r,l(this))[1]}catch(e){return""}}})},b59c:function(e,t,n){"use strict";n.r(t);var a=n("7a23"),c={class:"mt-40 container"},i=Object(a["e"])("h2",{class:"text-white"},"自行車路線總覽",-1),o=Object(a["e"])("div",{id:"mapRoute",class:"mapStation rounded-2 border my-4"},null,-1);function s(e,t,n,s,l,r){var u=Object(a["w"])("BikeRoute");return Object(a["r"])(),Object(a["d"])("div",c,[i,o,Object(a["h"])(u,{onEmitCityroute:r.getSelect,"card-item":l.apiBike},null,8,["onEmitCityroute","card-item"])])}n("d81d"),n("99af"),n("d3b7"),n("159b");var l=n("e11e"),r=n.n(l),u=n("6c2d"),d=(n("b0c0"),{class:"row my-5"}),b={class:"col-12 col-md-4 text-white"},m=Object(a["e"])("h5",{class:"fw-normal"},"依自行車道名稱",-1),h=Object(a["e"])("option",{value:"",selected:""},"選擇自行車道",-1),p=["value"],y=Object(a["f"])('<div class="d-flex my-3"><input type="text" class="formInput form-control me-2 shadow-sm" placeholder="搜尋自行車道關鍵字" aria-label="bike keyword" aria-describedby="keyword"><button class="formBtn btn btn-primary shadow" type="button" id="keyword"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16"><path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"></path></svg><span class="ms-2">查詢</span></button></div>',1),f=Object(a["e"])("h5",{class:"fw-normal"},"依自行車道區域",-1),j=Object(a["e"])("option",{value:"",selected:""},"縣市",-1),O=["value"],w=Object(a["e"])("option",{value:"",selected:""},"區域",-1),v=["value"],g=Object(a["f"])('<div class="d-flex my-3"><input type="text" class="formInput form-control me-2 shadow-sm" placeholder="搜尋自行車道起點終點" aria-label="bike address" aria-describedby="address"><button class="formBtn btn btn-primary shadow" type="button" id="address"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16"><path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"></path></svg><span class="ms-2">查詢</span></button></div>',1),k={class:"col-12 col-md-8 d-flex justify-content-between flex-wrap"},S={class:"d-flex align-items-start justify-content-between"},T={class:"fs-5 text-white"},x={class:"bg-count rounded-pill border"},C={class:"text-address"};function B(e,t,n,c,i,o){return Object(a["r"])(),Object(a["d"])("div",d,[Object(a["e"])("div",b,[Object(a["e"])("div",null,[m,Object(a["D"])(Object(a["e"])("select",{"onUpdate:modelValue":t[0]||(t[0]=function(e){return i.bikeSelect=e}),class:"form-select my-3","aria-label":"bike"},[h,(Object(a["r"])(!0),Object(a["d"])(a["a"],null,Object(a["v"])(n.cardItem,(function(e){return Object(a["r"])(),Object(a["d"])("option",{key:e.en,value:e.en},Object(a["y"])(e.RouteName),9,p)})),128))],512),[[a["A"],i.bikeSelect]]),y]),Object(a["e"])("div",null,[f,Object(a["D"])(Object(a["e"])("select",{onChange:t[1]||(t[1]=function(){return o.emit&&o.emit.apply(o,arguments)}),"onUpdate:modelValue":t[2]||(t[2]=function(e){return i.citySelect=e}),class:"form-select my-3","aria-label":"country"},[j,(Object(a["r"])(!0),Object(a["d"])(a["a"],null,Object(a["v"])(i.city,(function(e){return Object(a["r"])(),Object(a["d"])("option",{key:e.en,value:e.en},Object(a["y"])(e.name),9,O)})),128))],544),[[a["A"],i.citySelect]]),Object(a["D"])(Object(a["e"])("select",{"onUpdate:modelValue":t[3]||(t[3]=function(e){return i.cityForTown=e}),class:"form-select my-3","aria-label":"country"},[w,(Object(a["r"])(!0),Object(a["d"])(a["a"],null,Object(a["v"])(i.forTown,(function(e){return Object(a["r"])(),Object(a["d"])("option",{key:e,value:e},Object(a["y"])(e),9,v)})),128))],512),[[a["A"],i.cityForTown]]),g])]),Object(a["e"])("div",k,[(Object(a["r"])(!0),Object(a["d"])(a["a"],null,Object(a["v"])(n.cardItem,(function(e){return Object(a["r"])(),Object(a["d"])("div",{key:e.StationUID,class:"cardItem py-3"},[Object(a["e"])("div",null,[Object(a["e"])("div",S,[Object(a["e"])("div",null,[Object(a["e"])("p",T,Object(a["y"])(e.RouteName),1),Object(a["e"])("small",null,Object(a["y"])(e.City)+"｜"+Object(a["y"])(e.Town)+" "+Object(a["y"])(e.AuthorityName),1)]),Object(a["e"])("small",x,Object(a["y"])(e.Direction),1)])]),Object(a["e"])("small",C,"起點："+Object(a["y"])(e.RoadSectionStart)+" 終點："+Object(a["y"])(e.RoadSectionEnd),1)])})),128))])])}var I={props:{cardItem:{type:Object,default:function(){return{}}}},data:function(){return{bikeSelect:"",citySelect:"",cityForTown:"",data:[],forTown:[],city:[{name:"臺中市",en:"Taichung"},{name:"新竹市",en:"Hsinchu"},{name:"苗栗縣",en:"MiaoliCounty"},{name:"新北市",en:"NewTaipei"},{name:"屏東縣",en:"PingtungCounty"},{name:"金門縣",en:"KinmenCounty"},{name:"桃園市",en:"Taoyuan"},{name:"臺北市",en:"Taipei"},{name:"高雄市",en:"Kaohsiung"},{name:"臺南市",en:"Tainan"},{name:"嘉義市",en:"Chiayi"}]}},methods:{emit:function(){this.$emit("emit-cityroute",this.citySelect),console.log("emit到外層",this.citySelect)}},watch:{citySelect:function(e){var t=this;this.city.forEach((function(n){n.en===e&&(console.log("this",n.name),t.cardItem.forEach((function(e){console.log("herrrrr",e.Town),t.forTown.push(e.Town)})))}))}}},M=(n("4d35"),n("d959")),z=n.n(M);const A=z()(I,[["render",B]]);var D=A,E={components:{BikeRoute:D},data:function(){return{getCitySelect:"Taichung",mymap:null,nowLocation:{latitude:25.047675,longitude:121.517055},apiBike:[]}},methods:{getSelect:function(e){this.getCitySelect=e,console.log("text接收",this.getCitySelect),this.getApiBike()},getMap:function(){this.mymap=r.a.map("mapRoute").setView([this.nowLocation.latitude,this.nowLocation.longitude],15),r.a.tileLayer("https://api.mapbox.com/styles/v1/{username}/{style_id}/tiles/{z}/{x}/{y}?access_token={accessToken}",{maxZoom:18,username:"unayo",style_id:"ckw6oruov0sl614pinxf6eb44",tileSize:512,zoomOffset:-1,accessToken:"pk.eyJ1IjoidW5heW8iLCJhIjoiY2t1d2EwNzZpMGh2aDJ3cmYwdWJnb2hudyJ9.XcnKuVJN2Q50urzdA594WQ"}).addTo(this.mymap),r.a.control.zoom({position:"bottomright"}).addTo(this.mymap)},getApiBike:function(){var e=this,t="https://ptx.transportdata.tw/MOTC/v2/Cycling/Shape/".concat(this.getCitySelect,"?$format=JSON");this.$http.get(t,{headers:this.apiID()}).then((function(t){e.apiBike=t.data,console.log("縣市之自行車道路網圖資",e.apiBike)}))},apiID:function(){var e="d270b525f2114a95895b7670090cb92c",t="Pwts_rFo3XHtvuvjDziNlG6fqvM",n=(new Date).toGMTString(),a=new u["a"]("SHA-1","TEXT");a.setHMACKey(t,"TEXT"),a.update("x-date: "+n);var c=a.getHMAC("B64"),i='hmac username="'.concat(e,'", algorithm="hmac-sha1", headers="x-date", signature="').concat(c,'"');return{Authorization:i,"X-Date":n}},setMarker:function(){var e=this;this.apiBike.forEach((function(t){var n=new r.a.DivIcon({html:'<span class="number">'.concat(t.AvailableRentBikes,"</span>"),className:"leafletIcon",iconSize:[36,44]});r.a.marker([t.StationPosition.PositionLat,t.StationPosition.PositionLon],{icon:n}).addTo(e.mymap)}))}},mounted:function(){this.getApiBike(),this.getMap()}};n("356b");const J=z()(E,[["render",s]]);t["default"]=J},dadb:function(e,t,n){}}]);
//# sourceMappingURL=chunk-130b3a65.26a84ed5.js.map